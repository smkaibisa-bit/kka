<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ular Tangga Edukatif</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100%;
        }

        * {
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            min-height: 100%;
            padding: 20px;
        }

        /* Splash Screen */
        .splash-screen {
            text-align: center;
            padding: 40px 20px;
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .splash-title {
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .developer-info {
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            color: white;
        }

        .developer-info h3 {
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        .developer-info p {
            margin: 5px 0;
            font-size: 18px;
        }

        .player-input-section {
            margin: 30px 0;
            padding: 20px;
        }

        .input-group {
            margin: 15px 0;
            text-align: left;
        }

        .input-group label {
            display: block;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .name-input {
            width: 100%;
            padding: 12px 20px;
            font-size: 18px;
            border: 3px solid #667eea;
            border-radius: 15px;
            outline: none;
            transition: all 0.3s ease;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', sans-serif;
        }

        .name-input:focus {
            border-color: #f5576c;
            box-shadow: 0 0 15px rgba(245, 87, 108, 0.3);
            transform: scale(1.02);
        }

        .start-button {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 28px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 10px 30px rgba(245, 87, 108, 0.4);
        }

        .start-button:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(245, 87, 108, 0.6);
        }

        /* Game Board */
        .game-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
        }

        .game-header {
            background: white;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .players-status {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            gap: 20px;
        }

        .player-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 30px;
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            transition: transform 0.3s ease;
        }

        .player-card.active {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.6);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1.1); }
            50% { transform: scale(1.15); }
        }

        .board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        .cell {
            aspect-ratio: 1;
            border: 3px solid #333;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .cell:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .cell.highlight {
            animation: glow 0.5s ease-in-out;
            transform: scale(1.2);
            z-index: 10;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
            50% { box-shadow: 0 0 40px rgba(255, 215, 0, 1); }
        }

        .cell-number {
            position: absolute;
            top: 5px;
            left: 5px;
            font-size: 16px;
            font-weight: bold;
        }

        .player-token {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 3px solid white;
            position: absolute;
            bottom: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            z-index: 5;
            transition: all 0.5s ease;
        }

        .player1-token {
            background: #ff6b6b;
            left: 5px;
        }

        .player2-token {
            background: #4ecdc4;
            right: 5px;
        }

        .ladder, .snake {
            position: absolute;
            font-size: 30px;
            z-index: 3;
        }

        .controls {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .dice-container {
            display: inline-block;
            margin: 20px;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border: 4px solid #333;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .dice:hover {
            transform: rotate(10deg) scale(1.1);
        }

        .dice.rolling {
            animation: roll 0.5s ease-in-out;
        }

        @keyframes roll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .roll-button {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 24px;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.3s ease;
            box-shadow: 0 10px 20px rgba(245, 87, 108, 0.4);
        }

        .roll-button:hover:not(:disabled) {
            transform: scale(1.1);
        }

        .roll-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Question Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .question-text {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
            color: #333;
        }

        .answer-input {
            font-size: 36px;
            padding: 15px;
            border: 3px solid #667eea;
            border-radius: 15px;
            text-align: center;
            width: 200px;
            margin: 20px 0;
        }

        .submit-answer {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 24px;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .submit-answer:hover {
            transform: scale(1.1);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            position: absolute;
            animation: confetti-fall 3s linear;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100%) rotate(360deg);
                opacity: 0;
            }
        }

        .winner-message {
            font-size: 36px;
            font-weight: bold;
            color: #f5576c;
            margin: 20px 0;
            animation: bounce 1s infinite;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container"><!-- Splash Screen -->
   <div id="splashScreen" class="splash-screen">
    <div class="splash-title" id="gameTitle">
     üé≤ Ular Tangga Edukatif üé≤
    </div>
    <div class="developer-info">
     <h3>Dikembangkan Oleh:</h3>
     <p id="developerName">üë®‚Äçüíª Ulin Nuha, S.Kom</p>
     <p id="institutionName">üè´ SMK Al Ishlah Pulokulon</p>
    </div>
    <div class="player-input-section">
     <h3 style="color: #667eea; margin-bottom: 20px;">Masukkan Nama Pemain</h3>
     <div class="input-group"><label for="player1Input">üî¥ Nama Pemain 1:</label> <input type="text" id="player1Input" class="name-input" placeholder="Masukkan nama pemain 1" value="Pemain 1">
     </div>
     <div class="input-group"><label for="player2Input">üîµ Nama Pemain 2:</label> <input type="text" id="player2Input" class="name-input" placeholder="Masukkan nama pemain 2" value="Pemain 2">
     </div>
    </div><button class="start-button" id="startButton">üéÆ Mulai Bermain üéÆ</button>
   </div><!-- Game Container -->
   <div id="gameContainer" class="game-container">
    <div class="game-header">
     <h1 id="gameHeaderTitle">üé≤ Ular Tangga Edukatif üé≤</h1>
     <div class="players-status">
      <div class="player-card" id="player1Card">
       <div id="player1NameDisplay">
        üî¥ Pemain 1
       </div>
       <div>
        Posisi: <span id="player1Pos">1</span>
       </div>
      </div>
      <div class="player-card" id="player2Card">
       <div id="player2NameDisplay">
        üîµ Pemain 2
       </div>
       <div>
        Posisi: <span id="player2Pos">1</span>
       </div>
      </div>
     </div>
    </div>
    <div class="board" id="board"></div>
    <div class="controls">
     <h2>Giliran: <span id="currentTurn">Pemain 1</span></h2>
     <div class="dice-container">
      <div class="dice" id="dice">
       üé≤
      </div>
     </div><br><button class="roll-button" id="rollButton">Lempar Dadu!</button>
    </div>
   </div><!-- Question Modal -->
   <div class="modal" id="questionModal">
    <div class="modal-content">
     <h2>üí° Soal Matematika üí°</h2>
     <div class="question-text" id="questionText"></div><input type="number" class="answer-input" id="answerInput" placeholder="?"> <br><button class="submit-answer" id="submitAnswer">Jawab!</button>
    </div>
   </div><!-- Winner Modal -->
   <div class="modal" id="winnerModal">
    <div class="modal-content">
     <div class="winner-message" id="winnerMessage"></div><button class="start-button" id="playAgainButton">Main Lagi!</button>
    </div>
   </div>
  </div>
  <script>
        const defaultConfig = {
            game_title: "üé≤ Ular Tangga Edukatif üé≤",
            developer_name: "üë®‚Äçüíª Ulin Nuha, S.Kom",
            institution_name: "üè´ SMK Al Ishlah Pulokulon",
            start_button_text: "üéÆ Mulai Bermain üéÆ",
            player1_name: "üî¥ Pemain 1",
            player2_name: "üîµ Pemain 2",
            background_color: "#667eea",
            surface_color: "#ffffff",
            text_color: "#333333",
            primary_action_color: "#f5576c",
            secondary_action_color: "#764ba2"
        };

        let config = { ...defaultConfig };

        // Game State
        let currentPlayer = 1;
        let player1Position = 1;
        let player2Position = 1;
        let diceValue = 0;
        let gameStarted = false;

        // Snakes and Ladders
        const snakes = {
            98: 28, 87: 24, 73: 53, 64: 16, 62: 19, 50: 34, 49: 11, 37: 3
        };

        const ladders = {
            4: 14, 9: 31, 20: 38, 28: 84, 40: 59, 51: 67, 63: 81, 71: 91
        };

        // Color palette for cells
        const colors = [
            '#FFB6C1', '#FFD700', '#98FB98', '#87CEEB', '#DDA0DD',
            '#F0E68C', '#FFE4B5', '#E0BBE4', '#FFDAB9', '#B0E0E6'
        ];

        function initializeBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';

            for (let row = 9; row >= 0; row--) {
                for (let col = 0; col < 10; col++) {
                    let cellNum;
                    if (row % 2 === 1) {
                        cellNum = row * 10 + (10 - col);
                    } else {
                        cellNum = row * 10 + (col + 1);
                    }

                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${cellNum}`;
                    cell.style.background = colors[cellNum % 10];

                    const cellNumber = document.createElement('div');
                    cellNumber.className = 'cell-number';
                    cellNumber.textContent = cellNum;
                    cell.appendChild(cellNumber);

                    // Add snakes
                    if (snakes[cellNum]) {
                        const snake = document.createElement('div');
                        snake.className = 'snake';
                        snake.textContent = 'üêç';
                        snake.title = `Turun ke ${snakes[cellNum]}`;
                        cell.appendChild(snake);
                    }

                    // Add ladders
                    if (ladders[cellNum]) {
                        const ladder = document.createElement('div');
                        ladder.className = 'ladder';
                        ladder.textContent = 'ü™ú';
                        ladder.title = `Naik ke ${ladders[cellNum]}`;
                        cell.appendChild(ladder);
                    }

                    board.appendChild(cell);
                }
            }

            updatePlayerPositions();
        }

        function updatePlayerPositions() {
            document.querySelectorAll('.player-token').forEach(token => token.remove());

            const cell1 = document.getElementById(`cell-${player1Position}`);
            const token1 = document.createElement('div');
            token1.className = 'player-token player1-token';
            cell1.appendChild(token1);

            const cell2 = document.getElementById(`cell-${player2Position}`);
            const token2 = document.createElement('div');
            token2.className = 'player-token player2-token';
            cell2.appendChild(token2);

            document.getElementById('player1Pos').textContent = player1Position;
            document.getElementById('player2Pos').textContent = player2Position;
        }

        function generateQuestion() {
            const operations = ['+', '-', '√ó', '√∑'];
            const operation = operations[Math.floor(Math.random() * operations.length)];
            let num1, num2, answer;

            switch(operation) {
                case '+':
                    num1 = Math.floor(Math.random() * 20) + 1;
                    num2 = Math.floor(Math.random() * 20) + 1;
                    answer = num1 + num2;
                    break;
                case '-':
                    num1 = Math.floor(Math.random() * 20) + 10;
                    num2 = Math.floor(Math.random() * 10) + 1;
                    answer = num1 - num2;
                    break;
                case '√ó':
                    num1 = Math.floor(Math.random() * 10) + 1;
                    num2 = Math.floor(Math.random() * 10) + 1;
                    answer = num1 * num2;
                    break;
                case '√∑':
                    num2 = Math.floor(Math.random() * 10) + 1;
                    answer = Math.floor(Math.random() * 10) + 1;
                    num1 = num2 * answer;
                    break;
            }

            return {
                question: `${num1} ${operation} ${num2}`,
                answer: answer
            };
        }

        function showConfetti() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        function highlightCell(cellNum) {
            const cell = document.getElementById(`cell-${cellNum}`);
            cell.classList.add('highlight');
            setTimeout(() => cell.classList.remove('highlight'), 500);
        }

        function movePlayer(steps) {
            const newPosition = (currentPlayer === 1 ? player1Position : player2Position) + steps;
            
            if (newPosition > 100) {
                switchPlayer();
                return;
            }

            if (currentPlayer === 1) {
                player1Position = newPosition;
            } else {
                player2Position = newPosition;
            }

            updatePlayerPositions();
            highlightCell(newPosition);

            // Check for snake or ladder
            setTimeout(() => {
                if (snakes[newPosition]) {
                    setTimeout(() => {
                        if (currentPlayer === 1) {
                            player1Position = snakes[newPosition];
                        } else {
                            player2Position = snakes[newPosition];
                        }
                        updatePlayerPositions();
                        highlightCell(snakes[newPosition]);
                    }, 500);
                } else if (ladders[newPosition]) {
                    showConfetti();
                    setTimeout(() => {
                        if (currentPlayer === 1) {
                            player1Position = ladders[newPosition];
                        } else {
                            player2Position = ladders[newPosition];
                        }
                        updatePlayerPositions();
                        highlightCell(ladders[newPosition]);
                    }, 500);
                }

                // Check winner
                setTimeout(() => {
                    if ((currentPlayer === 1 && player1Position >= 100) || (currentPlayer === 2 && player2Position >= 100)) {
                        showWinner();
                    } else {
                        switchPlayer();
                    }
                }, 1000);
            }, 500);
        }

        function switchPlayer() {
            currentPlayer = currentPlayer === 1 ? 2 : 1;
            const player1NameText = config.player1_name || defaultConfig.player1_name;
            const player2NameText = config.player2_name || defaultConfig.player2_name;
            document.getElementById('currentTurn').textContent = currentPlayer === 1 ? player1NameText : player2NameText;
            
            document.getElementById('player1Card').classList.toggle('active', currentPlayer === 1);
            document.getElementById('player2Card').classList.toggle('active', currentPlayer === 2);
            
            document.getElementById('rollButton').disabled = false;
        }

        function showWinner() {
            const player1NameText = config.player1_name || defaultConfig.player1_name;
            const player2NameText = config.player2_name || defaultConfig.player2_name;
            document.getElementById('winnerMessage').textContent = `üéâ ${currentPlayer === 1 ? player1NameText : player2NameText} Menang! üéâ`;
            document.getElementById('winnerModal').classList.add('show');
            showConfetti();
        }

        // Event Listeners
        document.getElementById('startButton').addEventListener('click', () => {
            // Get player names from input
            const player1InputValue = document.getElementById('player1Input').value.trim();
            const player2InputValue = document.getElementById('player2Input').value.trim();
            
            // Update config with player names
            if (player1InputValue) {
                config.player1_name = `üî¥ ${player1InputValue}`;
            }
            if (player2InputValue) {
                config.player2_name = `üîµ ${player2InputValue}`;
            }
            
            // Update display immediately
            document.getElementById('player1NameDisplay').textContent = config.player1_name || defaultConfig.player1_name;
            document.getElementById('player2NameDisplay').textContent = config.player2_name || defaultConfig.player2_name;
            document.getElementById('currentTurn').textContent = config.player1_name || defaultConfig.player1_name;
            
            document.getElementById('splashScreen').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
            if (!gameStarted) {
                initializeBoard();
                gameStarted = true;
                document.getElementById('player1Card').classList.add('active');
            }
        });

        document.getElementById('rollButton').addEventListener('click', () => {
            document.getElementById('rollButton').disabled = true;
            const dice = document.getElementById('dice');
            dice.classList.add('rolling');

            setTimeout(() => {
                diceValue = Math.floor(Math.random() * 6) + 1;
                dice.textContent = diceValue;
                dice.classList.remove('rolling');

                // Show question
                const questionData = generateQuestion();
                document.getElementById('questionText').textContent = questionData.question;
                document.getElementById('answerInput').value = '';
                document.getElementById('questionModal').classList.add('show');
                document.getElementById('answerInput').focus();

                document.getElementById('submitAnswer').onclick = () => {
                    const userAnswer = parseInt(document.getElementById('answerInput').value);
                    document.getElementById('questionModal').classList.remove('show');

                    if (userAnswer === questionData.answer) {
                        showConfetti();
                        movePlayer(diceValue);
                    } else {
                        switchPlayer();
                    }
                };
            }, 500);
        });

        document.getElementById('playAgainButton').addEventListener('click', () => {
            player1Position = 1;
            player2Position = 1;
            currentPlayer = 1;
            document.getElementById('winnerModal').classList.remove('show');
            initializeBoard();
            document.getElementById('player1Card').classList.add('active');
            document.getElementById('player2Card').classList.remove('active');
            const player1NameText = config.player1_name || defaultConfig.player1_name;
            document.getElementById('currentTurn').textContent = player1NameText;
        });

        // Allow Enter key to submit answer
        document.getElementById('answerInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('submitAnswer').click();
            }
        });

        // Element SDK Implementation
        async function onConfigChange(newConfig) {
            const gameTitleElement = document.getElementById('gameTitle');
            if (gameTitleElement) {
                gameTitleElement.textContent = newConfig.game_title || defaultConfig.game_title;
            }

            const gameHeaderTitleElement = document.getElementById('gameHeaderTitle');
            if (gameHeaderTitleElement) {
                gameHeaderTitleElement.textContent = newConfig.game_title || defaultConfig.game_title;
            }

            const developerNameElement = document.getElementById('developerName');
            if (developerNameElement) {
                developerNameElement.textContent = newConfig.developer_name || defaultConfig.developer_name;
            }

            const institutionNameElement = document.getElementById('institutionName');
            if (institutionNameElement) {
                institutionNameElement.textContent = newConfig.institution_name || defaultConfig.institution_name;
            }

            const startButtonElement = document.getElementById('startButton');
            if (startButtonElement) {
                startButtonElement.textContent = newConfig.start_button_text || defaultConfig.start_button_text;
            }

            const player1NameDisplayElement = document.getElementById('player1NameDisplay');
            if (player1NameDisplayElement) {
                player1NameDisplayElement.textContent = newConfig.player1_name || defaultConfig.player1_name;
            }

            const player2NameDisplayElement = document.getElementById('player2NameDisplay');
            if (player2NameDisplayElement) {
                player2NameDisplayElement.textContent = newConfig.player2_name || defaultConfig.player2_name;
            }

            const currentTurnElement = document.getElementById('currentTurn');
            if (currentTurnElement) {
                const displayName = currentPlayer === 1 ? 
                    (newConfig.player1_name || defaultConfig.player1_name) : 
                    (newConfig.player2_name || defaultConfig.player2_name);
                currentTurnElement.textContent = displayName;
            }

            // Apply colors
            const backgroundColor = newConfig.background_color || defaultConfig.background_color;
            document.body.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, #764ba2 100%)`;

            const surfaceColor = newConfig.surface_color || defaultConfig.surface_color;
            document.querySelectorAll('.splash-screen, .board, .game-header, .controls').forEach(el => {
                el.style.background = surfaceColor;
            });

            const textColor = newConfig.text_color || defaultConfig.text_color;
            document.body.style.color = textColor;

            const primaryActionColor = newConfig.primary_action_color || defaultConfig.primary_action_color;
            document.querySelectorAll('.start-button, .roll-button').forEach(el => {
                el.style.background = `linear-gradient(45deg, #f093fb 0%, ${primaryActionColor} 100%)`;
            });

            const secondaryActionColor = newConfig.secondary_action_color || defaultConfig.secondary_action_color;
            document.querySelectorAll('.player-card, .developer-info, .submit-answer').forEach(el => {
                el.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${secondaryActionColor} 100%)`;
            });
        }

        function mapToCapabilities(cfg) {
            return {
                recolorables: [
                    {
                        get: () => cfg.background_color || defaultConfig.background_color,
                        set: (value) => {
                            cfg.background_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        }
                    },
                    {
                        get: () => cfg.surface_color || defaultConfig.surface_color,
                        set: (value) => {
                            cfg.surface_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ surface_color: value });
                            }
                        }
                    },
                    {
                        get: () => cfg.text_color || defaultConfig.text_color,
                        set: (value) => {
                            cfg.text_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        }
                    },
                    {
                        get: () => cfg.primary_action_color || defaultConfig.primary_action_color,
                        set: (value) => {
                            cfg.primary_action_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ primary_action_color: value });
                            }
                        }
                    },
                    {
                        get: () => cfg.secondary_action_color || defaultConfig.secondary_action_color,
                        set: (value) => {
                            cfg.secondary_action_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ secondary_action_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(cfg) {
            return new Map([
                ["game_title", cfg.game_title || defaultConfig.game_title],
                ["developer_name", cfg.developer_name || defaultConfig.developer_name],
                ["institution_name", cfg.institution_name || defaultConfig.institution_name],
                ["start_button_text", cfg.start_button_text || defaultConfig.start_button_text],
                ["player1_name", cfg.player1_name || defaultConfig.player1_name],
                ["player2_name", cfg.player2_name || defaultConfig.player2_name]
            ]);
        }

        // Initialize SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities,
                mapToEditPanelValues
            });

            config = window.elementSdk.config;
            onConfigChange(config);
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a20a696855940bc',t:'MTc2MzczMjk3MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>